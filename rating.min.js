$.fn.modrate=function(a){var a=$.extend({className:"rate-star",classActive:"rate-active",classHover:"rate-hover",classGrab:"rate-grab",count:5,text:"â˜…"},a);return this.each(function(){var b=$(this),c=b.data(),d=parseInt(c.value,10),e=c.mode,f=c.name,g=parseInt(c.count,10),h=a.className,i=a.classActive,j=a.classHover,k=a.classGrab;b.removeAttr("data-count data-value"),g||(g=a.count),d?d>g&&(d=g):d=0;for(var l=0;l<g;l++)$('<div class="'+h+'">'+a.text+"</div>").appendTo(b);if(d>0&&$("."+h,this).slice(0,d).addClass(i),"active"==e){var m=$('<input type="hidden" name="'+f+'"/>').appendTo(b);b.removeAttr("data-name data-mode").addClass(k);var n=$("."+h,b);n.hover(function(){var a=$(this).index()+1;n.slice(0,a).addClass(j)},function(){n.removeClass(j)}).click(function(){var a=$(this).index()+1;n.removeClass(i).slice(0,a).addClass(i),m.val(a)})}})};
